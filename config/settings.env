# Feature Toggles - Source Control
ENABLE_ICLOUD_DOWNLOAD=false
ENABLE_FOLDER_DOWNLOAD=false
ENABLE_ICLOUD_UPLOAD=false
ENABLE_PIXEL_UPLOAD=true

# Feature Toggles - Processing Control
ENABLE_COMPRESSION=false
ENABLE_IMAGE_COMPRESSION=false
ENABLE_VIDEO_COMPRESSION=false
ENABLE_DEDUPLICATION=true
ENABLE_SORTING=true
ENABLE_FILE_PREPARATION=true
ENABLE_VERIFICATION=true

# iCloud
ICLOUD_USERNAME=xxxxxxxxxx
ICLOUD_PASSWORD=xxxxxxxxxxx

# Supabase
SUPABASE_URL=xxxxxxxxxxxx
SUPABASE_KEY=xxxxxxxxxxx

# NAS Mount Path (for LXC) - Your base folder
NAS_MOUNT=/mnt/wd_all_pictures/sync

# Directory Structure (relative to NAS_MOUNT)
ORIGINALS_DIR=/mnt/wd_all_pictures/sync/originals
COMPRESSED_DIR=/mnt/wd_all_pictures/sync/compressed

# Source Directories
FOLDER_SOURCE_PATH=/mnt/wd_all_pictures/sync/source_folder
FOLDER_SOURCE_PATTERNS=*.jpg,*.jpeg,*.png,*.gif,*.bmp,*.tiff,*.mp4,*.mov,*.avi,*.mkv,*.webm

# Bridge Directories (simplified - no numbered batches)
BRIDGE_ICLOUD_DIR=/mnt/wd_all_pictures/sync/bridge/icloud
BRIDGE_PIXEL_DIR=/mnt/wd_all_pictures/sync/bridge/pixel
BRIDGE_FOLDER_DIR=/mnt/wd_all_pictures/sync/bridge/folder

# Uploaded Directories (for tracking)
UPLOADED_ICLOUD_DIR=/mnt/wd_all_pictures/sync/uploaded/icloud
UPLOADED_PIXEL_DIR=/mnt/syncthing/pixel
UPLOADED_FOLDER_DIR=/mnt/wd_all_pictures/sync/uploaded/folder

# Final Organization Directories
SORTED_DIR=/mnt/wd_all_pictures/sync/sorted
SORTED_ICLOUD_DIR=/mnt/wd_all_pictures/sync/sorted/icloud
SORTED_PIXEL_DIR=/mnt/wd_all_pictures/sync/sorted/pixel
SORTED_FOLDER_DIR=/mnt/wd_all_pictures/sync/sorted/folder
CLEANUP_DIR=/mnt/wd_all_pictures/sync/cleanup

# Pixel Syncthing Folder (for LXC) - Where Syncthing syncs to
PIXEL_SYNC_FOLDER=/mnt/wd_all_pictures/sync/bridge/pixel

# File Processing Settings (simplified - no numbered batches)
# These settings control how files are organized before upload
MAX_PROCESSING_SIZE_GB=5
MAX_PROCESSING_FILES=5

# Compression Settings
JPEG_QUALITY=90
VIDEO_CRF=28
VIDEO_PRESET=fast

# Progressive Compression Settings
COMPRESSION_INTERVAL_YEARS=2
INITIAL_RESIZE_PERCENTAGE=80
SUBSEQUENT_RESIZE_PERCENTAGE=90
INITIAL_VIDEO_RESOLUTION=1080
SUBSEQUENT_VIDEO_RESOLUTION=720
MAX_FILES_TO_PROCESS=5

# Deduplication Settings
# Optional: include additional directories (comma or newline separated) to sweep for duplicates
# DEDUPLICATION_DIRECTORIES=/mnt/wd_all_pictures/sync/uploaded/icloud-extra,/data/external
DEDUPLICATION_HASH_ALGORITHM=md5
DEDUPLICATION_BATCH_SIZE=1000

# Sorting Settings
SORTING_USE_EXIF=true
SORTING_FALLBACK_TO_CREATION_DATE=true

# Logging
LOG_LEVEL=INFO

# LXC/Proxmox Specific
LXC_USER=media-pipeline
LXC_GROUP=media-pipeline
MOUNT_PERMISSIONS=755

# Upload Settings
ICLOUD_BATCH_SIZE=50
PIXEL_SYNC_TIMEOUT=300
UPLOAD_RETRY_ATTEMPTS=3
UPLOAD_RETRY_DELAY=30
# Optional selector overrides for Puppeteer automation
ICLOUD_UPLOAD_SELECTOR=
# Persisted session cookies for Puppeteer uploads
ICLOUD_SESSION_FILE=/opt/media-pipeline/.config/icloud_session.json
ICLOUD_UPLOAD_TIMEOUT=300

# Syncthing Settings
SYNCTHING_URL=http://localhost:8384
SYNCTHING_API_KEY=xxxxxxxxxxxxxxx
PIXEL_FOLDER_ID=hmmcd-wjatk

# Simplified Processing Settings
CLEAR_BRIDGE_BEFORE_PROCESSING=true
ENABLE_FILENAME_CONFLICT_RESOLUTION=true
TEST_KEY=test_value
TELEGRAM_BOT_TOKEN=xxxxxxxxxxxxxxxxxxxxxxxxxxxx
TELEGRAM_CHAT_ID=xxxxxxxxxxxxxxx

# Telegram Debug Configuration
TELEGRAM_DEBUG_MESSAGES=true
TELEGRAM_STEP_SUMMARIES=true
TELEGRAM_PIPELINE_NOTIFICATIONS=true
TELEGRAM_ERROR_NOTIFICATIONS=true

# Google Photos Sync Check Configuration
ENABLE_GOOGLE_PHOTOS_SYNC_CHECK=false
GOOGLE_PHOTOS_CLIENT_ID=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
GOOGLE_PHOTOS_CLIENT_SECRET=xxxxxxxxxxxxxxxxxxxxxxx

# Pipeline Execution Configuration
# PIPELINE_EXECUTION_INTERVAL_MINUTES: Minutes to wait between pipeline runs
# Valid values: 1-1440 (1 minute to 24 hours)
# Recommended: 60 (1 hour) for production, 5-15 for development
PIPELINE_EXECUTION_INTERVAL_MINUTES=60

# PIPELINE_EXECUTION_MODE: How the pipeline should run
# Valid values: continuous, single, scheduled
# - continuous: Run continuously with intervals (default for production)
# - single: Run once and exit (for manual execution/testing)
# - scheduled: Run at specific times (future feature)
PIPELINE_EXECUTION_MODE=continuous

# PIPELINE_MAX_EXECUTIONS_PER_DAY: Maximum executions per day to prevent overload
# Valid values: 1-1440 (1 to 24 executions per hour)
# Recommended: 24 (once per hour) for production, 288 (every 5 min) for development
PIPELINE_MAX_EXECUTIONS_PER_DAY=24

# Batch Manager Settings
BATCH_SIZE=100
SYNC_INTERVAL=600
CACHE_TTL=300
MAX_RETRIES=3
RETRY_DELAY=5
